import{r as t,c as i,h as s,H as e}from"./p-87657220.js";function n(t,i=!1){return function(t){return!isNaN(function(t){return parseInt(""+t,10)}(t))}(t)?i?("0000"+t).substr(-4,4):("00"+t).substr(-2,2):""}const h=class{constructor(s){t(this,s),this.valueChange=i(this,"valueChange",7),this.placeholder="yyyy-mm-dd",this.monthPicker=!1,this.forceCustom=!1,this.disabled=!1,this.unitNames={month:"Month",day:"Day",year:"Year"},this.isValidDate=t=>!t||!(!(t instanceof Date)||isNaN(t.getTime())),this.styles={display:this.monthPicker?"none":"inherit"}}componentWillLoad(){this.inputRawValue=this.getStringFromDate(this.value),this.localCodeHandler()}valueHandler(t){this.inputRawValue=this.getStringFromDate(t)}localCodeHandler(){var t;const i=new Date(2012,0,5),s=new Intl.DateTimeFormat(this.localeCode,{month:"long"}),e=this.getRelativeTimeFormat(this.localeCode),n=null===(t=new Intl.DateTimeFormat(this.localeCode))||void 0===t?void 0:t.format(i),h=["day","month","year"].sort((t,i)=>{const s={day:n.search(/5/g)||0,month:n.search(/1/g)||1,year:n.search(/2012/g)||2};return s[t]-s[i]});null==h||h.map(t=>{var i,s,n;this.unitNames[t]=(null===(n=null===(s=null===(i=null==e?void 0:e.formatToParts(1,t))||void 0===i?void 0:i.filter(t=>"literal"===t.type)[1])||void 0===s?void 0:s.value)||void 0===n?void 0:n.trim())||t}),this._customPickerOrder=h;const a=[this.unitNames.month];[...Array(12)].map((t,e)=>{i.setMonth(e),a.push(s.format(i))}),this._monthNames=a,console.log("customPickerOrder  monthNames",h,a)}get locale(){return navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language}get monthNames(){return this._monthNames}get customPickerOrder(){return this._customPickerOrder}get customDay(){if(void 0===this._customDay&&this.inputRawValue){const t=this.monthPicker?1:Number(this.inputRawValue.substr(8,2));return this._customDay=t,this._customDay}return this._customDay}set customDay(t){this.monthPicker||(this._customDay=t?Number(t):null,this.trySaveDate())}get customMonth(){if(void 0===this._customMonth&&this.inputRawValue){const t=Number(this.inputRawValue.substr(5,2));return this._customMonth=t,this._customMonth}return this._customMonth}set customMonth(t){this._customMonth=t||null,this.trySaveDate()}get customYear(){if(void 0===this._customYear&&this.inputRawValue){const t=Number(this.inputRawValue.substr(0,4));return this._customYear=t,this._customYear}return this._customYear}set customYear(t){this._customYear=t?Number(t):null,this.trySaveDate()}trySaveDate(){const t=this.monthPicker?1:this.customDay,i=this.customMonth,s=this.customYear,e=`${n(s,!0)}-${n(i)}-${n(t)}`,h=new Date(e),a=h.getMonth()+1;this.value=h.getFullYear()===s&&a==i&&h.getDate()===t?h:new Date(""),this.valueChange.emit(this.value)}getStringFromDate(t){var i;return this.isValidDate(t)&&(null===(i=null==t?void 0:t.toISOString())||void 0===i?void 0:i.substr(0,this.monthPicker?7:10))||""}getRelativeTimeFormat(t){return Intl.RelativeTimeFormat?new Intl.RelativeTimeFormat(t):null}isDateInRange(t,i,s){this.min||this.max?this.min&&t>=this.min?!this.max||this.max&&t<=this.max?i&&i():s&&s():this.max&&t<=this.max&&(!this.min||this.min&&t>=this.min)?i&&i():s&&s():i&&i()}inputChanged(t){this.value=new Date(t.target&&t.target.value),this.valueChange.emit(this.value)}supportsInputOfType(t){const i=document.createElement("input");i.setAttribute("type",t);const s="not-a-date";return i.setAttribute("value",s),i.value!==s}render(){var t;return s(e,null,!this.forceCustom&&this.supportsInputOfType("month")?s("input",this.monthPicker?{type:"month",class:{"form-control seb-datepicker-native":!0,"is-invalid":!this.isValidDate(this.value)},min:this.getStringFromDate(this.min),max:this.getStringFromDate(this.max),disabled:this.disabled,value:this.inputRawValue,onInput:this.inputChanged.bind(this)}:{type:"date",style:this.styles,class:{"form-control seb-datepicker-native":!0,"is-invalid":!this.isValidDate(this.value)},min:this.getStringFromDate(this.min),max:this.getStringFromDate(this.max),disabled:this.disabled,value:this.inputRawValue,onInput:this.inputChanged.bind(this)}):s("div",{class:"input-group"},null===(t=this.customPickerOrder)||void 0===t?void 0:t.map((t,i)=>"day"!==t||this.monthPicker?"month"===t?s("select",{class:{"custom-select":!0,"is-invalid":!this.isValidDate(this.value),"rounded-left":0===i,"rounded-right":i===this.customPickerOrder.length-1},disabled:this.disabled,onInput:t=>this.customMonth=t.target.value},this.monthNames.map((t,i)=>s("option",{disabled:this.disabled||0===i,value:i,selected:this.customMonth===i||0===i},t))):"year"===t?s("input",{type:"number",min:"1",class:{"form-control":!0,"is-invalid":!this.isValidDate(this.value)},placeholder:this.unitNames.year,value:this.customYear,onInput:t=>this.customYear=t.target.value,disabled:this.disabled}):null:s("input",{class:{"form-control":!0,"is-invalid":!this.isValidDate(this.value)},style:this.styles,type:"number",min:"1",max:"31",placeholder:this.unitNames.day,value:this.customDay,onInput:t=>this.customDay=t.target.value,disabled:this.disabled}))))}static get assetsDirs(){return["assets"]}static get watchers(){return{value:["valueHandler"],localeCode:["localCodeHandler"]}}};h.style="::-webkit-calendar-picker-indicator{color:rgba(0, 0, 0, 0);cursor:pointer;background:url(./assets/seb-calendar-icon.svg) no-repeat 0.25rem}input.seb-datepicker-native{padding-right:0.5rem}::-webkit-outer-spin-button,::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.input-group input[type='number']{-moz-appearance:textfield}.input-group .custom-select{appearance:none;-webkit-appearance:none;-moz-appearance:none}.is-invalid{border-bottom:var(--danger) 1.5px solid !important}";export{h as web_datepicker}